!function(a){"use strict";function b(b,c){var d={action:"es_get_locations",nonce:Estatik.nonces.nonce_locations,types:b.data("address-components")},e=b.data("placeholder");e?b.html("<option value=''>"+e+"</option>"):b.html(""),void 0!==c&&(d.dependency_id=c.val()),a.get(ajaxurl,d,function(a){a&&(Object.keys(a).map(function(c,d){var e=a[c];b.data("value")&&b.data("value")==c?b.append("<option value='"+c+"' selected>"+e+"</option>"):b.append("<option value='"+c+"'>"+e+"</option>")}),b.data("value")&&b.trigger("change"))},"json")}function c(b){var c=b.$el;d=setInterval(function(){var b=c.find(".elementor-select2[multiple]:not(.es-drag-tags-enabled)");b.length&&b.each(function(){var b=a(this),c=b.next(".select2-container").first("ul.select2-selection__rendered");b.addClass("es-drag-tags-enabled"),c.sortable({placeholder:"ui-state-highlight",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",create:function(d,e){var f=a(c).closest(".select2").prev(),g=f.data("value");if(g){g=g.split(",").reverse();for(var h in g){for(var i=b.select2("data"),j=g[h],k=0;k<i.length;k++)i[k].id===j&&(j=i[k].id);var l=b.find('option[value="'+j+'"]')[0];b.prepend(l)}}},stop:function(){a(c.find(".select2-selection__choice").get().reverse()).each(function(){for(var c=b.select2("data"),d=a(this).attr("title"),e=0;e<c.length;e++)c[e].text===d&&(d=c[e].id);var f=b.find('option[value="'+d+'"]')[0];b.prepend(f)}),b.trigger("change")}})})},500)}var d,e={notificationActionsInitialized:!1,notificationsTimeout:!1,notificationsTimeoutStarted:!1,renderNotification:function(b){var c=this;a(".js-es-notifications").html(b),c.notificationsTimeoutStarted=!1,clearTimeout(c.notificationsTimeout),this.notificationActionsInitialized||(a(window).on("mousemove keypress click scroll",function(){a(".es-notification",a(document)).length&&(c.notificationsTimeoutStarted||(c.notificationsTimeout=setTimeout(function(){a(".es-notification",a(document)).remove()},4e3),c.notificationsTimeoutStarted=!0))}),a(document).on("click",".js-es-notification-close",function(){return a(this).parent().remove(),!1}),this.notificationActionsInitialized=!0)},loadTermsCreator:function(b,c,d){return a.get(ajaxurl,{taxonomy:b,type:c,action:"es_get_terms_creator",nonce:Estatik.nonces.get_terms_creator_nonce},d)},initFields:function(){a(".js-es-tags, .js-es-select2").each(function(){a(this).hasClass("select2-hidden-accessible")||a(this).select2({width:"100%",placeholder:a(this).data("placeholder")})})}};a(function(){e.initFields(),"undefined"!=typeof elementor&&(elementor.hooks.addAction("panel/open_editor/widget/es-search-form-widget",c),elementor.hooks.addAction("panel/open_editor/widget/es-listings-widget",c),elementor.hooks.addAction("panel/open_editor/widget/es-hfm-widget",c)),a(document).on("click",".js-es-entity-form #post [type=submit]",function(){a(".js-es-metabox").find("input, textarea, select").filter("[required]:hidden, [type=url]:hidden, [type=email]:hidden").each(function(){if(!a(this)[0].checkValidity()){var b=a(this).closest(".js-es-tabs__content").attr("id");return a(".js-es-tabs").find('[href="#'+b+'"]').trigger("click"),!1}})}),a(document).on("change",".js-es-field__recipient-type",function(){var b=a(this),c=b.val(),d=b.closest(".es-widget__form").find(".es-field__custom_email");"-1"===c?d.removeClass("es-hidden"):d.addClass("es-hidden")}),a(".js-es-field__recipient-type").trigger("change"),a(document).on("change",".js-es-show-properties-by:checked",function(){var b=a(this),c=b.val(),d=b.closest(".es-widget__form");d.find("[class^=es-listings-by-]").hide(),d.find(".es-listings-by-"+c).show()}),a(document).on("widget-added",function(b){a(".js-es-show-properties-by").trigger("change")}),a(document).ajaxComplete(function(){e.initFields(),a(".js-es-show-properties-by").trigger("change")}),a(document).on("change",".js-es-search-type",function(){var b=a(this),c=b.val(),d=b.closest(".es-widget__form"),e=d.find(".es-field__background"),f=d.find(".js-es-search-fields"),g=d.find(".es-field__fields");"main"===c?e.removeClass("es-hidden").addClass("es-field--color--break-label"):e.addClass("es-hidden"),"advanced"===c?(f.addClass("es-hidden"),g.removeClass("es-hidden")):(f.removeClass("es-hidden"),g.addClass("es-hidden"))}),a(".js-es-accordion__toggle").click(function(){var b=a(this).closest(".js-es-accordion");return b.toggleClass("es-accordion--active"),b.find(".es-accordion__body").slideToggle("slow"),!1}),a(document).on("change","[data-save-container]",function(){var b;b="checkbox"===a(this).attr("type")?a(this).is(":checked")?a(this).val():0:a(this).val(),a.post(ajaxurl,{field:a(this).data("save-field"),save_field_nonce:Estatik.nonces.save_field_nonce,container:a(this).data("save-container"),value:b,action:"es_save_field"})}),a(document).on("submit",".js-es-settings-form",function(){var b=a(this),c=b.find(".js-es-save-settings");return c.prop("disabled","disabled").addClass("es-preload"),a.post(ajaxurl,a(this).serialize(),function(a){a.message&&e.renderNotification(a.message)},"json").fail(function(){e.renderNotification("<div class='es-notification es-notification--error'>Saving error. Please, contact estatik support.</div>")}).always(function(){c.removeProp("disabled").removeAttr("disabled").removeClass("es-preload"),a("html,body").animate({scrollTop:0},"slow")}),!1}),a(window).scroll(function(){var b=a(".js-es-fixed-nav, .es-tabs__fields-builder .es-tabs__nav-inner"),c=a(this);b.each(function(){var b=a(this);if(b.height()<c.height()-40){var d="fixed"===b.css("position");c.scrollTop()>48&&!d&&b.css({position:"fixed",top:"72px"}),c.scrollTop()<48&&d&&b.css({position:"static",top:"72px"})}})}),void 0!==a.fn.slick&&a(".js-es-slick").slick(),new ClipboardJS(".js-es-copy");var b=a("#elementor-switch-mode-input");if(b.length&&b.val()){var d;d=setInterval(function(){if(!b.val()){var c,e=tinyMCE.get("alternative_description");c=null!==e&&!1===e.hidden?e.getContent():a("#alternative_description").val();var f=tinyMCE.get("content");null!==f&&!1===f.hidden?f.setContent(c):a("#content").val(c),clearInterval(d)}},500)}a(document).on("click",".notice[data-notice] .notice-dismiss",function(){var b=a(this).closest(".notice").data("notice");a.post(ajaxurl,{_ajax_nonce:Estatik.nonces.dismiss_notice_nonce,notice:b,action:"es_dismiss_notices"})})}),window.Estatik_Admin=e,window.esLoadFieldLocations=b}(jQuery);